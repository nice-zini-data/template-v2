# 로컬 개발 환경 설정
server:
  port: 8090

spring:
  datasource:
    # Primary 데이터소스 (PostgreSQL)
    driver-class-name: net.sf.log4jdbc.sql.jdbcapi.DriverSpy
    url: ENC(bg80rsDyL6noa9MKMot8Bwq0hEZ4NAgr0sqxzChaDS9HGBZs45CMVqs9Gj2zywscTbt6QQrPgNNDf+2IOniDnOEV3YuchB87ggkGRf9qVnOTxas5AAO0HGsdhEnXwZ+vrVUBGNTNd3aTEUgruBEN9E8lTodVySdt2BX6eI7OE9laqmzQ4x0hbDY09ikuwRdfZTzvTaTpPOsfMBqpKcbgwA==)
    username: ENC(9oGQXLBnrwj6l6Uu3CN0iSe9l0I5DHp4o8ffg/8UaZE=)
    password: ENC(82ssOM81lgT7VMYc/rAaNBAJnGwmtjL2o0EyMHs5HnQ=)
    hikari:
      maximum-pool-size: 5
      minimum-idle: 2
      connection-timeout: 20000
      idle-timeout: 300000
      max-lifetime: 1200000
      leak-detection-threshold: 60000
    
    # SMS 전용 MySQL 데이터소스 (다중 데이터소스 설정 시 활성화)
    # sms:
    #   driver-class-name: net.sf.log4jdbc.sql.jdbcapi.DriverSpy
    #   jdbc-url: jdbc:log4jdbc:mysql://localhost:3307/cmapt?useUnicode=true&characterEncoding=utf8mb4&useSSL=false&allowPublicKeyRetrieval=true
    #   username: cmapap
    #   password: nice1234
    #   hikari:
    #     maximum-pool-size: 3
    #     minimum-idle: 1
    #     connection-timeout: 20000
    #     idle-timeout: 300000
    #     max-lifetime: 1200000
    #     leak-detection-threshold: 60000
  
  data:
    redis:
      host: 43.202.226.198
      port: 6379
      database: 0
      timeout: 1000ms
      lettuce:
        pool:
          max-active: 5
          max-idle: 2
          min-idle: 1
          max-wait: 2000ms
  
  session:
    cookie:
      secure: false
      same-site: lax
  
  # 파일 업로드 설정 (개발 환경)
  servlet:
    multipart:
      enabled: true
      max-file-size: 50MB  # 최소 30MB 이상의 이미지 파일도 받을 수 있도록 설정 (이미지는 서버에서 1MB로 자동 리사이징)
      max-request-size: 50MB
      location: /tmp
      file-size-threshold: 1MB
  
  devtools:
    livereload:
      enabled: true
    restart:
      enabled: true
      additional-paths: "src/main/java"
      exclude: "assets/**,templates/**,static/**,public/**,webapp/**,src/main/webapp/**"

# 로깅 설정
logging:
  level:
    root: INFO
    com.zinidata: DEBUG
    org.springframework.security: DEBUG
    org.springframework.web: DEBUG
    org.mybatis: DEBUG
    com.zaxxer.hikari: DEBUG
    org.springframework.session: DEBUG
    org.springframework.cache: DEBUG
    sql: DEBUG
    jdbc: OFF
    jdbc.sqltiming: INFO
    jdbc.sqlonly: OFF
    jdbc.audit: OFF
    jdbc.resultset: OFF
    jdbc.resultsettable: OFF
    log4jdbc.sqltiming: OFF
  pattern:
    console: "%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}"
  file:
    name: zinidataLog

# Actuator 설정
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
      show-components: always
    shutdown:
      enabled: true

# OpenAPI 설정
springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true
    display-request-duration: true
    display-operation-id: true
    show-common-extensions: true
    doc-expansion: none
    default-models-expand-depth: 3
    default-model-expand-depth: 3

# 애플리케이션 설정
app:
  baseUrl: https://sypark.nicebizmap.co.kr

# 커스텀 설정
custom:
  security:
    rate-limit:
      enabled: false
    cors:
      allowed-origins: "http://localhost:8001,https://sypark.nicebizmap.co.kr"
      allowed-methods: "*"
      allowed-headers: "*"
      allow-credentials: true
    csrf:
      enabled: false
  
  debug:
    enabled: true  # 개발환경에서만 콘솔 로그 출력 활성화

# 보안 설정 (개발 환경)
security:
  browser-check:
    enabled: false  # 개발 편의성을 위해 비활성화
  
  upload:
    base-path: /app/upload
    create-date-folder: false
    virus-scan-enabled: false
  
  cache:
    default-ttl: 60
    
  audit:
    enabled: true
    include-request-body: true
    include-response-body: true
    max-body-size: 2048

# Jasypt 설정
jasypt:
  encryptor:
    bean: jasyptEncryptor
    password: ${JASYPT_ENCRYPTOR_PASSWORD:wlslepdlxk0904!@#}
    algorithm: PBEWithSHA256And128BitAES-CBC-BC
    key-obtention-iterations: 1000
    pool-size: 1
    provider-name: BC
    salt-generator-classname: org.jasypt.salt.RandomSaltGenerator
    iv-generator-classname: org.jasypt.iv.RandomIvGenerator
    string-output-type: base64

# 카카오 OAuth 설정 (로컬 개발환경)
kakao:
  oauth:
    redirect-uri: https://devncs2.nicebizmap.co.kr/api/oauth/callback/kakao

# 토스페이먼츠 설정 (로컬 개발환경)
toss:
  clientKey: ENC(7TjVinhPlZDsP3B5UjnINclymA0/0+GP58lw8AT/eXxbeYfA5P2Qp9b4eB6tZzosHevgyvhhmW/JLCqM1tYUng==)
  secretKey: ENC(R8bSXC9yaiyX1bjvqODrB3N12qP62HKAtiC+mF9JFZK2JtWtsQ/q7wa6s6hFLwanp3GVf3z0qmdYIiKvkRJvxw==)

# BetterBoss AI 설정 (개발 환경)
betterboss:
  url: http://devai.nicebizmap.co.kr
  chatUrl: http://devai.nicebizmap.co.kr/chat
# SMS 발송 설정 (개발 환경)
sms:
  url: devapi2.nicebizmap.co.kr
  api:
    loginId: smsSend
    password: nice1234!!
  db:
    url: jdbc:mysql://10.81.190.121:3306/cmapt?useUnicode=true&characterEncoding=euc-kr