<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- ============================== í—¤ë“œ ì„¤ì • ============================== -->
    <th:block th:replace="~{fragments/head :: head}" />
</head>
<body>
    <div class="wrap">
        <!-- ============================== í—¤ë” ì„¤ì • ============================== -->
        <th:block th:replace="~{fragments/header :: mainHeader}" />

        <!-- ============================== ë©”ì¸ ì»¨í…ì¸  ì„¤ì • ============================== -->
        <main class="fixContainer">
            <div class="max-w-6xl mx-auto py-10 px-5">
                <!-- í˜ì´ì§€ í—¤ë” -->
                <div class="bg-gradient-to-r from-red-600 via-red-500 to-red-400 text-white p-6 rounded-xl mb-6 shadow-lg">
                    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
                    <nav class="flex items-center space-x-2 text-sm mb-4">
                        <a href="/" class="hover:text-red-200 transition-colors">ğŸ  í™ˆ</a>
                        <span class="text-red-200">/</span>
                        <a href="/admin" class="hover:text-red-200 transition-colors">âš™ï¸ ê´€ë¦¬ì</a>
                        <span class="text-red-200">/</span>
                        <span class="text-red-100">ğŸ›¡ï¸ IP ì°¨ë‹¨ ê´€ë¦¬</span>
                    </nav>
                    
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="text-3xl font-bold mb-2">ğŸ›¡ï¸ IP ì°¨ë‹¨ ê´€ë¦¬</h1>
                            <p class="opacity-90">ì‹œìŠ¤í…œ ë³´ì•ˆì„ ìœ„í•œ IP ì£¼ì†Œ ì°¨ë‹¨ ê´€ë¦¬</p>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-red-100" th:text="${totalCount}">0</div>
                            <div class="text-sm text-red-200">ì´ ì°¨ë‹¨ëœ IP</div>
                        </div>
                    </div>
                </div>

                <!-- IP ì°¨ë‹¨ ë“±ë¡ í¼ -->
                <section class="section-card bg-white rounded-lg shadow-md p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                        ğŸ”’ ìƒˆ IP ì°¨ë‹¨ ë“±ë¡
                    </h2>
                    
                    <form id="blockIpForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">IP ì£¼ì†Œ *</label>
                            <input type="text" id="ipAddress" name="ip" class="form-input w-full border border-gray-300 rounded-lg px-3 py-2" 
                                   placeholder="192.168.1.100" required pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì°¨ë‹¨ ì‚¬ìœ  *</label>
                            <input type="text" id="blockReason" name="reason" class="form-input w-full border border-gray-300 rounded-lg px-3 py-2" 
                                   placeholder="ì•…ì„± ì ‘ê·¼ ì‹œë„" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì°¨ë‹¨ íƒ€ì…</label>
                            <select id="blockType" class="form-input w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="permanent">ì˜êµ¬ ì°¨ë‹¨</option>
                                <option value="temporary">ì„ì‹œ ì°¨ë‹¨</option>
                            </select>
                        </div>
                        
                        <div id="ttlContainer" class="hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì°¨ë‹¨ ì‹œê°„ (ì‹œê°„)</label>
                            <input type="number" id="ttlHours" name="ttlHours" class="form-input w-full border border-gray-300 rounded-lg px-3 py-2" 
                                   placeholder="24" min="1" max="8760">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">í”„ë¡œì íŠ¸ ì½”ë“œ</label>
                            <input type="text" id="appCode" name="appCode" class="form-input w-full border border-gray-300 rounded-lg px-3 py-2" 
                                   value="NBZM" readonly>
                        </div>
                        
                        <div class="flex items-end">
                            <button type="submit" class="btn-primary bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg w-full transition-colors">
                                ğŸ”’ ì°¨ë‹¨ ë“±ë¡
                            </button>
                        </div>
                    </form>
                </section>

                <!-- ê²€ìƒ‰ ë° í•„í„° -->
                <section class="section-card bg-white rounded-lg shadow-md p-6 mb-6">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <input type="text" id="searchIp" class="form-input border border-gray-300 rounded-lg px-3 py-2" placeholder="IP ì£¼ì†Œ ê²€ìƒ‰...">
                            </div>
                            <div>
                                <select id="filterType" class="form-input border border-gray-300 rounded-lg px-3 py-2">
                                    <option value="">ì „ì²´</option>
                                    <option value="permanent">ì˜êµ¬ ì°¨ë‹¨</option>
                                    <option value="temporary">ì„ì‹œ ì°¨ë‹¨</option>
                                </select>
                            </div>
                            <button id="searchBtn" class="btn-secondary bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors">
                                ğŸ” ê²€ìƒ‰
                            </button>
                        </div>
                        
                        <div class="flex items-center gap-2">
                            <button id="refreshBtn" class="btn-secondary bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors">
                                ğŸ”„ ìƒˆë¡œê³ ì¹¨
                            </button>
                            <button id="bulkUnblockBtn" class="btn-danger bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors" disabled>
                                ğŸ”“ ì„ íƒ í•´ì œ
                            </button>
                        </div>
                    </div>
                </section>

                <!-- IP ì°¨ë‹¨ ëª©ë¡ í…Œì´ë¸” -->
                <section class="section-card bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="px-6 py-4 bg-gray-50 border-b">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center gap-2">
                            ğŸ“‹ ì°¨ë‹¨ëœ IP ëª©ë¡
                        </h3>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        <input type="checkbox" id="selectAll" class="rounded">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        IP ì£¼ì†Œ
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        ì°¨ë‹¨ ì‚¬ìœ 
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        ì°¨ë‹¨ íƒ€ì…
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        ì°¨ë‹¨ ì‹œê°„
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        ë‚¨ì€ ì‹œê°„
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        ì‘ì—…
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="ipTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° -->
                                <tr th:if="${#lists.isEmpty(blockedIps)}">
                                    <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                                        <div class="text-4xl mb-4">â„¹ï¸</div>
                                        <div class="text-lg">ì°¨ë‹¨ëœ IPê°€ ì—†ìŠµë‹ˆë‹¤.</div>
                                        <div class="text-sm mt-2">ìƒˆë¡œìš´ IPë¥¼ ì°¨ë‹¨í•˜ì—¬ ì‹œìŠ¤í…œì„ ë³´í˜¸í•˜ì„¸ìš”.</div>
                                    </td>
                                </tr>
                                
                                <!-- IP ì°¨ë‹¨ ëª©ë¡ -->
                                <tr th:each="ip : ${blockedIps}" class="border-b border-gray-200 hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <input type="checkbox" th:value="${ip.ip}" class="ip-checkbox rounded">
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900" th:text="${ip.ip}">192.168.1.100</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900" th:text="${ip.reason}">ì•…ì„± ì ‘ê·¼ ì‹œë„</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span th:class="${ip.permanent} ? 'bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium' : 'bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium'"
                                              th:text="${ip.permanent} ? 'ì˜êµ¬ì°¨ë‹¨' : 'ì„ì‹œì°¨ë‹¨'">ì˜êµ¬ì°¨ë‹¨</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900" th:text="${ip.blockedTime}">2025-01-21 14:30:00</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900" 
                                             th:text="${ip.permanent} ? 'ì˜êµ¬' : ${ip.ttlSeconds != null and ip.ttlSeconds > 0} ? ${ip.ttlSeconds / 3600} + 'ì‹œê°„ ' + ${(ip.ttlSeconds % 3600) / 60} + 'ë¶„' : 'ë§Œë£Œ'">
                                            ì˜êµ¬
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button th:onclick="'unblockIp(\'' + ${ip.ip} + '\')'" 
                                                class="text-red-600 hover:text-red-900 flex items-center gap-1">
                                            ğŸ”“ í•´ì œ
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>

            <!-- Alert ëª¨ë‹¬ -->
            <div id="alertModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 max-w-md w-mx">
                    <div class="flex items-center gap-3 mb-4">
                        <div id="alertIcon" class="text-2xl">â„¹ï¸</div>
                        <h3 id="alertTitle" class="text-lg font-medium">ì•Œë¦¼</h3>
                    </div>
                    <p id="alertMessage" class="text-gray-700 mb-6">ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    <div class="flex justify-end">
                        <button id="alertCloseBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">í™•ì¸</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- ============================== í‘¸í„° ì„¤ì • ============================== -->
        <th:block th:replace="~{fragments/footer :: footer}" />
    </div>

    <!-- ============================== ìŠ¤í¬ë¦½íŠ¸ ì„¤ì • ============================== -->
    <th:block th:replace="~{fragments/script :: script}" />
    
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            loadIpList();
        });

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initializeEventListeners() {
            // IP ì°¨ë‹¨ ë“±ë¡ í¼
            document.getElementById('blockIpForm').addEventListener('submit', handleBlockIp);
            
            // ì°¨ë‹¨ íƒ€ì… ë³€ê²½ ì‹œ TTL ì…ë ¥ë€ í‘œì‹œ/ìˆ¨ê¹€
            document.getElementById('blockType').addEventListener('change', function() {
                const ttlContainer = document.getElementById('ttlContainer');
                if (this.value === 'temporary') {
                    ttlContainer.classList.remove('hidden');
                    document.getElementById('ttlHours').required = true;
                } else {
                    ttlContainer.classList.add('hidden');
                    document.getElementById('ttlHours').required = false;
                }
            });

            // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤
            document.getElementById('selectAll').addEventListener('change', function() {
                const checkboxes = document.querySelectorAll('.ip-checkbox');
                checkboxes.forEach(checkbox => checkbox.checked = this.checked);
                updateBulkUnblockButton();
            });

            // ê°œë³„ ì²´í¬ë°•ìŠ¤ ë³€ê²½ ì‹œ
            document.addEventListener('change', function(e) {
                if (e.target.classList.contains('ip-checkbox')) {
                    updateBulkUnblockButton();
                }
            });

            // ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('refreshBtn').addEventListener('click', loadIpList);
            document.getElementById('bulkUnblockBtn').addEventListener('click', handleBulkUnblock);
            document.getElementById('searchBtn').addEventListener('click', searchIps);
            document.getElementById('alertCloseBtn').addEventListener('click', hideAlert);
        }

        // IP ì°¨ë‹¨ ë“±ë¡ ì²˜ë¦¬
        async function handleBlockIp(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const blockType = document.getElementById('blockType').value;
            
            if (blockType === 'permanent') {
                formData.delete('ttlHours');
            }

            try {
                const response = await fetch('/admin/ip-management/block', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                
                if (result.success) {
                    showAlert('success', 'ì„±ê³µ', 'IP ì°¨ë‹¨ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    e.target.reset();
                    document.getElementById('ttlContainer').classList.add('hidden');
                    loadIpList();
                } else {
                    showAlert('error', 'ì˜¤ë¥˜', result.message || 'IP ì°¨ë‹¨ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showAlert('error', 'ì˜¤ë¥˜', 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // IP ì°¨ë‹¨ í•´ì œ
        async function unblockIp(ip) {
            if (!confirm(`IP ${ip}ì˜ ì°¨ë‹¨ì„ í•´ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            try {
                const response = await fetch('/admin/ip-management/unblock', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `ip=${encodeURIComponent(ip)}`
                });

                const result = await response.json();
                
                if (result.success) {
                    showAlert('success', 'ì„±ê³µ', 'IP ì°¨ë‹¨ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadIpList();
                } else {
                    showAlert('error', 'ì˜¤ë¥˜', result.message || 'IP ì°¨ë‹¨ í•´ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showAlert('error', 'ì˜¤ë¥˜', 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì¼ê´„ ì°¨ë‹¨ í•´ì œ
        async function handleBulkUnblock() {
            const selectedIps = Array.from(document.querySelectorAll('.ip-checkbox:checked'))
                .map(checkbox => checkbox.value);

            if (selectedIps.length === 0) {
                showAlert('warning', 'ì•Œë¦¼', 'í•´ì œí•  IPë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!confirm(`ì„ íƒëœ ${selectedIps.length}ê°œ IPì˜ ì°¨ë‹¨ì„ í•´ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            try {
                const formData = new FormData();
                selectedIps.forEach(ip => formData.append('ips', ip));

                const response = await fetch('/admin/ip-management/unblock-bulk', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                
                if (result.success) {
                    showAlert('success', 'ì„±ê³µ', `${selectedIps.length}ê°œ IP ì°¨ë‹¨ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                    loadIpList();
                } else {
                    showAlert('error', 'ì˜¤ë¥˜', result.message || 'ì¼ê´„ í•´ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showAlert('error', 'ì˜¤ë¥˜', 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // IP ëª©ë¡ ìƒˆë¡œê³ ì¹¨
        async function loadIpList() {
            try {
                const response = await fetch('/admin/ip-management/list');
                const result = await response.json();
                
                if (result.success) {
                    updateIpTable(result.data);
                } else {
                    showAlert('error', 'ì˜¤ë¥˜', 'IP ëª©ë¡ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showAlert('error', 'ì˜¤ë¥˜', 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // IP í…Œì´ë¸” ì—…ë°ì´íŠ¸
        function updateIpTable(ipList) {
            const tbody = document.getElementById('ipTableBody');
            
            if (ipList.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                            <div class="text-4xl mb-4">â„¹ï¸</div>
                            <div class="text-lg">ì°¨ë‹¨ëœ IPê°€ ì—†ìŠµë‹ˆë‹¤.</div>
                            <div class="text-sm mt-2">ìƒˆë¡œìš´ IPë¥¼ ì°¨ë‹¨í•˜ì—¬ ì‹œìŠ¤í…œì„ ë³´í˜¸í•˜ì„¸ìš”.</div>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = ipList.map(ip => `
                <tr class="border-b border-gray-200 hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <input type="checkbox" value="${ip.ip}" class="ip-checkbox rounded">
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${ip.ip}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${ip.reason}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="${ip.isPermanent ? 'bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium' : 'bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium'}">
                            ${ip.type}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${ip.blockedTime}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${ip.remainingTime}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="unblockIp('${ip.ip}')" 
                                class="text-red-600 hover:text-red-900 flex items-center gap-1">
                            ğŸ”“ í•´ì œ
                        </button>
                    </td>
                </tr>
            `).join('');

            // ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ì¬ë“±ë¡
            document.querySelectorAll('.ip-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateBulkUnblockButton);
            });
        }

        // ì¼ê´„ í•´ì œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateBulkUnblockButton() {
            const selectedCount = document.querySelectorAll('.ip-checkbox:checked').length;
            const bulkBtn = document.getElementById('bulkUnblockBtn');
            
            bulkBtn.disabled = selectedCount === 0;
            bulkBtn.textContent = selectedCount > 0 ? `ğŸ”“ ì„ íƒ í•´ì œ (${selectedCount})` : 'ğŸ”“ ì„ íƒ í•´ì œ';
        }

        // IP ê²€ìƒ‰
        function searchIps() {
            const searchTerm = document.getElementById('searchIp').value.toLowerCase();
            const filterType = document.getElementById('filterType').value;
            const rows = document.querySelectorAll('#ipTableBody tr');

            rows.forEach(row => {
                const ip = row.cells[1]?.textContent?.toLowerCase() || '';
                const type = row.cells[3]?.textContent?.toLowerCase() || '';
                
                const matchesSearch = ip.includes(searchTerm);
                const matchesFilter = !filterType || 
                    (filterType === 'permanent' && type.includes('ì˜êµ¬')) ||
                    (filterType === 'temporary' && type.includes('ì„ì‹œ'));

                row.style.display = matchesSearch && matchesFilter ? '' : 'none';
            });
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showAlert(type, title, message) {
            const modal = document.getElementById('alertModal');
            const icon = document.getElementById('alertIcon');
            const titleEl = document.getElementById('alertTitle');
            const messageEl = document.getElementById('alertMessage');

            // ì•„ì´ì½˜ ì„¤ì •
            switch(type) {
                case 'success':
                    icon.textContent = 'âœ…';
                    break;
                case 'error':
                    icon.textContent = 'âŒ';
                    break;
                case 'warning':
                    icon.textContent = 'âš ï¸';
                    break;
                default:
                    icon.textContent = 'â„¹ï¸';
            }

            titleEl.textContent = title;
            messageEl.textContent = message;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // ì•Œë¦¼ ìˆ¨ê¹€
        function hideAlert() {
            const modal = document.getElementById('alertModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }
    </script>
</body>
</html> 